
    const galleries = {
        nature: [
            { small: "https://thumbs.dreamstime.com/b/deep-forest-path-percy-warner-park-ai-generated-illustration-image-deep-forest-path-percy-warner-park-made-294979520.jpg", full: "https://thumbs.dreamstime.com/b/deep-forest-path-percy-warner-park-ai-generated-illustration-image-deep-forest-path-percy-warner-park-made-294979520.jpg", caption: "Deep Forest Path" },

            { small: "https://thumbs.dreamstime.com/b/calm-reflective-serene-peaceful-lake-cloudy-sky-mirror-like-surface-ai-generated-271421919.jpg", full: "https://thumbs.dreamstime.com/b/calm-reflective-serene-peaceful-lake-cloudy-sky-mirror-like-surface-ai-generated-271421919.jpg", caption: "Reflective Serene Lake" },

            { small: "https://offloadmedia.feverup.com/secretldn.com/wp-content/uploads/2019/11/29051532/Winter-Wonderland.jpeg", full: "https://offloadmedia.feverup.com/secretldn.com/wp-content/uploads/2019/11/29051532/Winter-Wonderland.jpeg", caption: "Winter Wonderland" },

            { small: "https://tse1.mm.bing.net/th/id/OIP.fU_mnx2u0WuBNS-zXJX_HAHaEJ?rs=1&pid=ImgDetMain&o=7&rm=3", full: "https://tse1.mm.bing.net/th/id/OIP.fU_mnx2u0WuBNS-zXJX_HAHaEJ?rs=1&pid=ImgDetMain&o=7&rm=3", caption: "Vibrant Flower Garden" }
        ],
        cityscape: [
            { small: "https://tse4.mm.bing.net/th/id/OIP.iinH5qa3pqYUt4csErcdcQAAAA?rs=1&pid=ImgDetMain&o=7&rm=3", full: "https://tse4.mm.bing.net/th/id/OIP.iinH5qa3pqYUt4csErcdcQAAAA?rs=1&pid=ImgDetMain&o=7&rm=3", caption: "Dazzling City Lights" },

            { small: "https://tse1.mm.bing.net/th/id/OIP.nG_6YM6_Mg1q7iWPlSNhKgHaE7?rs=1&pid=ImgDetMain&o=7&rm=3", full: "https://tse1.mm.bing.net/th/id/OIP.nG_6YM6_Mg1q7iWPlSNhKgHaE7?rs=1&pid=ImgDetMain&o=7&rm=3", caption: "Metropolis at Dusk" },

            { small: "https://res.cloudinary.com/tryba-architects/image/upload/c_fit,dpr_auto,fl_progressive,w_1900/u6fa6ashddtinxnsgqhb", full: "https://res.cloudinary.com/tryba-architects/image/upload/c_fit,dpr_auto,fl_progressive,w_1900/u6fa6ashddtinxnsgqhb", caption: "Urban Architecture" }
        ],
        mountains: [
            { small: "https://png.pngtree.com/thumb_back/fw800/background/20241014/pngtree-majestic-snowy-peaks-of-sayan-mountains-winter-photo-background-image_16388637.jpg", full: "https://png.pngtree.com/thumb_back/fw800/background/20241014/pngtree-majestic-snowy-peaks-of-sayan-mountains-winter-photo-background-image_16388637.jpg", caption: "Majestic Snow Peaks" },

            { small: "https://images.fineartamerica.com/images/artworkimages/mediumlarge/2/misty-mountain-valley-by-dave-photography-by-phos3-kathryn-parent-and-dave-paddick.jpg", full: "https://images.fineartamerica.com/images/artworkimages/mediumlarge/2/misty-mountain-valley-by-dave-photography-by-phos3-kathryn-parent-and-dave-paddick.jpg", caption: "Misty Mountain Valley" },

            { small: "https://tse4.mm.bing.net/th/id/OIP.Usa0sxDRlSWHHGAxJH0a-QHaEf?rs=1&pid=ImgDetMain&o=7&rm=3", full: "https://tse4.mm.bing.net/th/id/OIP.Usa0sxDRlSWHHGAxJH0a-QHaEf?rs=1&pid=ImgDetMain&o=7&rm=3", caption: "Alpine Lake" }
        ],
        beaches: [
            { small: "https://tse4.mm.bing.net/th/id/OIP.K0_rk4ChuJH4KQ2KMjdRbwHaE7?rs=1&pid=ImgDetMain&o=7&rm=3", full: "https://tse4.mm.bing.net/th/id/OIP.K0_rk4ChuJH4KQ2KMjdRbwHaE7?rs=1&pid=ImgDetMain&o=7&rm=3", caption: "Tropical Golden Beach" },

            { small: "https://th.bing.com/th/id/R.e64685289c36b15b65f31d231939b515?rik=HSgAVyqziP1S%2bw&riu=http%3a%2f%2fd28mt5n9lkji5m.cloudfront.net%2fi%2fWDPvlbZHiD.jpg&ehk=M9nBMlDONrh223bz48JBPKZnlUpMJkXAvCXNJScrRgk%3d&risl=&pid=ImgRaw&r=0", full: "https://th.bing.com/th/id/R.e64685289c36b15b65f31d231939b515?rik=HSgAVyqziP1S%2bw&riu=http%3a%2f%2fd28mt5n9lkji5m.cloudfront.net%2fi%2fWDPvlbZHiD.jpg&ehk=M9nBMlDONrh223bz48JBPKZnlUpMJkXAvCXNJScrRgk%3d&risl=&pid=ImgRaw&r=0", caption: "Sunset Over the Ocean" },

            { small: "https://tse1.explicit.bing.net/th/id/OIP.Ud5oNF9ISOyZaeN5nnuJ2QHaEK?rs=1&pid=ImgDetMain&o=7&rm=3", full: "https://tse1.explicit.bing.net/th/id/OIP.Ud5oNF9ISOyZaeN5nnuJ2QHaEK?rs=1&pid=ImgDetMain&o=7&rm=3", caption: "Rocky Cove" }
        ],
        deserts: [
            { small: "https://tse1.mm.bing.net/th/id/OIP.CUzO-R8qc5cw_kmjhxX6jQHaE7?rs=1&pid=ImgDetMain&o=7&rm=3", full: "https://tse1.mm.bing.net/th/id/OIP.CUzO-R8qc5cw_kmjhxX6jQHaE7?rs=1&pid=ImgDetMain&o=7&rm=3", caption: "Sahara Sand Dunes" },

            { small: "https://th.bing.com/th/id/R.586f420cdf13ea248984e92625b957be?rik=LIdkkcL0EplyFA&riu=http%3a%2f%2fstatic1.squarespace.com%2fstatic%2f587860113e00be246e9fa173%2f641fa7454b04ec45307c8709%2f641fa74bc52fc705979c6ecf%2f1679796074768%2fgolden-light-teddy-bear-cholla-cactus-garden-joshua-tree-national-park-sunrise-photographer-fine-art-sale.jpg%3fformat%3d1500w&ehk=IOXffYWOovzpmRcvzmA07oABJQ1mrpPfkRA4UhH5T%2fI%3d&risl=&pid=ImgRaw&r=0", full: "https://th.bing.com/th/id/R.586f420cdf13ea248984e92625b957be?rik=LIdkkcL0EplyFA&riu=http%3a%2f%2fstatic1.squarespace.com%2fstatic%2f587860113e00be246e9fa173%2f641fa7454b04ec45307c8709%2f641fa74bc52fc705979c6ecf%2f1679796074768%2fgolden-light-teddy-bear-cholla-cactus-garden-joshua-tree-national-park-sunrise-photographer-fine-art-sale.jpg%3fformat%3d1500w&ehk=IOXffYWOovzpmRcvzmA07oABJQ1mrpPfkRA4UhH5T%2fI%3d&risl=&pid=ImgRaw&r=0", caption: "Cactus at Sunrise" }
        ],
        wildlife: [
            { small: "https://wallpaperaccess.com/full/5371210.jpg", full: "https://wallpaperaccess.com/full/5371210.jpg", caption: "Majestic Lion" },

            { small: "https://th.bing.com/th/id/OIP.LApenl02TXyiScMeseG-twHaE8?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3", full: "https://th.bing.com/th/id/OIP.LApenl02TXyiScMeseG-twHaE8?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3", caption: "Eagle in Flight" },

            { small: "https://th.bing.com/th/id/R.1c4e46aa4752908e0e1ac31b1bb06aa5?rik=nSxPrYgYvUDshw&riu=http%3a%2f%2f4.bp.blogspot.com%2f-5mTsF38wQAg%2fUbWnnomCfFI%2fAAAAAAAADHQ%2f9HC8rEoxfoc%2fs1600%2fRed-Fox-Face.jpg&ehk=cRpbdARics1ZJn2hD6eZTvdcMyGNOiG6MK4H4OBZkkI%3d&risl=&pid=ImgRaw&r=0", full: "https://th.bing.com/th/id/R.1c4e46aa4752908e0e1ac31b1bb06aa5?rik=nSxPrYgYvUDshw&riu=http%3a%2f%2f4.bp.blogspot.com%2f-5mTsF38wQAg%2fUbWnnomCfFI%2fAAAAAAAADHQ%2f9HC8rEoxfoc%2fs1600%2fRed-Fox-Face.jpg&ehk=cRpbdARics1ZJn2hD6eZTvdcMyGNOiG6MK4H4OBZkkI%3d&risl=&pid=ImgRaw&r=0", caption: "Fox" }
        ]
    };


    
    const toggleBtn = document.getElementById("modeToggle");
    const body = document.body;
    const currentIcon = toggleBtn.querySelector('.current-icon');

    const savedTheme = localStorage.getItem("theme");
    
    function setTheme(theme) {
      if (theme === "dark") {
        body.classList.add("dark-mode");
        currentIcon.textContent = 'ðŸŒ™';
      } else {
        body.classList.remove("dark-mode");
        currentIcon.textContent = 'ðŸŒž';
      }
      localStorage.setItem("theme", theme);
    }

    if (savedTheme) {
      setTheme(savedTheme);
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        setTheme('dark');
    } else {
        setTheme('light');
    }

    toggleBtn.addEventListener("click", () => {
      const currentTheme = body.classList.contains("dark-mode") ? "light" : "dark";
      setTheme(currentTheme);
      
      
    });
    
    
    
    
    

    
    const lightboxOverlay = document.getElementById('lightboxOverlay');
    const lightboxImage = document.getElementById('lightboxImage');
    const lightboxCaption = document.getElementById('lightboxCaption');
    const lightboxClose = document.getElementById('lightboxClose');

    function openLightbox(item) {
        
        if (item.classList.contains('category-item')) return;

        const imgSrc = item.querySelector('img').getAttribute('data-full-src') || item.querySelector('img').src;
        const imgAlt = item.querySelector('img').alt;
        const captionText = item.querySelector('.caption').textContent;

        lightboxImage.src = imgSrc;
        lightboxImage.alt = imgAlt;
        lightboxCaption.textContent = captionText;
        lightboxOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
        lightboxClose.focus();
    }

    function closeLightbox() {
        lightboxOverlay.classList.remove('active');
        document.body.style.overflow = '';
    }

    lightboxClose.addEventListener('click', closeLightbox);
    lightboxOverlay.addEventListener('click', (e) => {
        if (e.target === lightboxOverlay) {
            closeLightbox();
        }
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && lightboxOverlay.classList.contains('active')) {
            closeLightbox();
        }
    });

    

    const mainGalleryView = document.getElementById('main-gallery-view');
    const detailGalleryView = document.getElementById('detail-gallery-view');
    const detailGridContainer = document.getElementById('detail-grid-container');
    const backButton = document.getElementById('back-button');

    
    function bindGridItemEvents(item, isCategory = false) {
        
        
        const action = (e) => {
            if (e.type === 'keypress' && (e.key !== 'Enter' && e.key !== ' ')) {
                return;
            }
            e.preventDefault();
            
            if (isCategory) {
                const galleryId = item.dataset.galleryId;
                showDetailGallery(galleryId);
            } else {
                openLightbox(item);
            }
        };

        item.addEventListener('click', action);
        item.addEventListener('keypress', action);
    }

    
    function showDetailGallery(galleryId) {
        const images = galleries[galleryId];
        if (!images) {
            console.error('Gallery not found:', galleryId);
            return;
        }

        
        detailGridContainer.innerHTML = '';

        
        images.forEach(image => {
            const itemHTML = `
                <div class="grid-item" tabindex="0" role="listitem">
                  <img src="${image.small}" data-full-src="${image.full}" alt="${image.caption}" loading="lazy">
                  <div class="caption-wrapper">
                    <div class="caption">${image.caption}</div>
                  </div>
                </div>
            `;
            const itemEl = document.createRange().createContextualFragment(itemHTML).firstElementChild;
            
            
            bindGridItemEvents(itemEl, false); 
            
            detailGridContainer.appendChild(itemEl);
        });

        
        mainGalleryView.style.display = 'none';
        detailGalleryView.style.display = 'block';
        
        

        window.scrollTo(0, 0); 
        backButton.focus(); 
    }

    function showMainGallery() {
        detailGalleryView.style.display = 'none';
        mainGalleryView.style.display = 'block';
        detailGridContainer.innerHTML = ''; 
        window.scrollTo(0, 0);
    }
    
    
    document.querySelectorAll('#main-gallery-view .grid-item').forEach(item => {
        item.classList.add('category-item'); 
        bindGridItemEvents(item, true); 
    });

    
    backButton.addEventListener('click', showMainGallery);
    backButton.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
            showMainGallery();
        }
    });